{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://bsix.com/schemas/match.schema.json",
  "title": "Match",
  "description": "Premier League match data schema",
  "type": "object",
  "required": ["id", "date", "homeTeam", "awayTeam", "competition", "venue", "status"],
  "properties": {
    "id": {
      "type": "string",
      "description": "Unique match identifier"
    },
    "date": {
      "type": "string",
      "format": "date-time",
      "description": "Match date and time in ISO 8601 format"
    },
    "homeTeam": {
      "$ref": "#/definitions/team"
    },
    "awayTeam": {
      "$ref": "#/definitions/team"
    },
    "competition": {
      "type": "object",
      "required": ["name", "season"],
      "properties": {
        "name": {
          "type": "string",
          "enum": ["Premier League", "Champions League", "FA Cup", "Carabao Cup"]
        },
        "season": {
          "type": "string",
          "pattern": "^\\d{4}-\\d{2}$"
        },
        "gameweek": {
          "type": "integer",
          "minimum": 1,
          "maximum": 38
        }
      }
    },
    "venue": {
      "type": "object",
      "required": ["name", "city"],
      "properties": {
        "name": {
          "type": "string"
        },
        "city": {
          "type": "string"
        },
        "capacity": {
          "type": "integer",
          "minimum": 0
        }
      }
    },
    "status": {
      "type": "string",
      "enum": ["scheduled", "live", "finished", "postponed", "cancelled"]
    },
    "score": {
      "type": "object",
      "properties": {
        "home": {
          "type": "integer",
          "minimum": 0
        },
        "away": {
          "type": "integer",
          "minimum": 0
        }
      }
    },
    "timeline": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/event"
      }
    },
    "preview": {
      "type": "object",
      "properties": {
        "headline": {
          "type": "string"
        },
        "summary": {
          "type": "string"
        },
        "keyPlayers": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "tacticalAnalysis": {
          "type": "string"
        }
      }
    }
  },
  "definitions": {
    "team": {
      "type": "object",
      "required": ["id", "name", "shortName"],
      "properties": {
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "shortName": {
          "type": "string",
          "maxLength": 3
        },
        "logo": {
          "type": "string",
          "format": "uri"
        },
        "formation": {
          "type": "string",
          "pattern": "^\\d-\\d-\\d(-\\d)?$"
        },
        "lineup": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/player"
          }
        },
        "manager": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string"
            },
            "nationality": {
              "type": "string"
            }
          }
        }
      }
    },
    "player": {
      "type": "object",
      "required": ["id", "name", "position"],
      "properties": {
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "position": {
          "type": "string",
          "enum": ["GK", "CB", "LB", "RB", "CDM", "CM", "CAM", "LM", "RM", "LW", "RW", "CF", "ST"]
        },
        "number": {
          "type": "integer",
          "minimum": 1,
          "maximum": 99
        },
        "nationality": {
          "type": "string"
        },
        "age": {
          "type": "integer",
          "minimum": 16,
          "maximum": 50
        },
        "stats": {
          "type": "object",
          "properties": {
            "goals": {
              "type": "integer",
              "minimum": 0
            },
            "assists": {
              "type": "integer",
              "minimum": 0
            },
            "appearances": {
              "type": "integer",
              "minimum": 0
            },
            "yellowCards": {
              "type": "integer",
              "minimum": 0
            },
            "redCards": {
              "type": "integer",
              "minimum": 0
            }
          }
        },
        "injury": {
          "type": "object",
          "properties": {
            "status": {
              "type": "string",
              "enum": ["fit", "doubt", "injured", "suspended"]
            },
            "description": {
              "type": "string"
            },
            "expectedReturn": {
              "type": "string",
              "format": "date"
            }
          }
        }
      }
    },
    "event": {
      "type": "object",
      "required": ["minute", "type"],
      "properties": {
        "minute": {
          "type": "integer",
          "minimum": 0,
          "maximum": 120
        },
        "type": {
          "type": "string",
          "enum": ["goal", "assist", "yellow_card", "red_card", "substitution", "penalty", "own_goal"]
        },
        "player": {
          "type": "string"
        },
        "team": {
          "type": "string",
          "enum": ["home", "away"]
        },
        "description": {
          "type": "string"
        }
      }
    }
  }
}
